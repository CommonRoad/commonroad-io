# Changelog

## [2022.2] - 2022-07-XX

### Added

- Function for getting lanelet orientation closest to a given position
- Function for getting most likely lanelet given an obstacle state
- Function for erasing lanelet network from scenario
- Function for replacing lanelet network of a scenario with new one
- Support for Protobuf format

### Changed

- Move tests, tutorial, and documentation folder to root directory

### Removed
- setter method for lanelet network in scenario class

### Fixed

- Default constructor for ScenarioID produces invalid Benchmark ID
- Changeable state list leads to inconsistent final time step of trajectory
- Various small bug fixes


## [2022.1] - 2022-04-05

### Added

- Video creation with custom draw parameters
- Obstacle icon with custom color

### Changed

- Remove support for Python 3.6

### Fixed

- Side-effect circle and rectangle init functions
- Parsing solution files with old time format
- Invalid lanelet occupancy computation using buffered polygons
- Various small bug fixes

## [2021.4] - 2021-12-21

### Added

- Polyline utility functions, e.g., resampling, path length, orientation, curvature, intersection
- `__eq__` and `__hash__` functions for LaneletNetwork and related classes (e.g., traffic sign, traffic light, stop
  line, etc.)
- Compatibility for Shapely 2.0
- New traffic signs for Germany

### Changed

- License switched to BSD-3
- Date in solution file now stored in the dateTime format (`%Y-%m-%dT%H:%M:%S`)

### Fixed

- Various small bug fixes

## [2021.3] - 2021-09-21

### Added

- Spatial indexing via STRTree in LaneletNetwork for faster computation of lanelet queries via positions or shapes

### Changed
- The function LaneletNetwork.create_from_lanelet_network accepts now a shape 
and set of lanelet types which should be excluded
- Shapely polygon for lanelets is created by default
- Function convert_to_polygon() within Lanelet class is deprecated 
and will be removed in the next release

### Fixed
- Various small bug fixes


## [2021.2] - 2021-07-01
### Added
- Parameter `draw_params={"focus_obstacle_id": obstacle_id}` focuses the plot or video on a dynamic_obstacle
- About 150 new traffic signs from Germany, Spain, and US added
- added new cost function TR1 to SolutionWriter

### Fixed
- Various small bug fixes


## [2021.1] - 2021-04-23
### Added
- Support for over 50 new traffic signs from Germany
- Support of phantom obstacles
- New visualization module which supports MVC pattern
- Functions for adding and removing traffic signs, traffic lights, and intersections from a scenario or lanelet network
- New icon visualization interface and new icons for bus, truck, and bicycle (developed by Simon Sagmeister - TUM FTM)

### Changed
- Scaling of traffic signs is coupled with the zoom level

### Fixed
- Various small bug fixes


## [2020.3] - 2020-10-30
### Added
- Support of environment obstacles, e.g. buildings
- Several new traffic signs
- New ScenarioID class for the representation of benchmarks
- New line marking types *unknown* and *no_marking*
- Crossings for intersections

### Changed
The creation of lanelet assignments for obstacles is now optional. This decreases the loading time of scenarios.
The lanelet assignment can still be performed manually after loading a scenario.

### Fixed
- Function *generate_object_id* works now if no element has been added before and reserves ID if object 
will be added later
- Various small bug fixes


## [2020.2] - 2020-04-14
## Changed
- Traffic signs are not visualized by default

### Added
- new tags for compatibility with 2018b XML format
- new lanelet types: unknown and interstate

### Fixed
- Various small bug fixes


## [2020.1] - 2020-04-08
### Added
- Support of 2020a Scenarios with TrafficLights, TrafficSigns, and Intersection objects
- SignalStates store information on turn lights, horn, hazard lights, and blue lights of DynamicObstacles
- New Solution object simplifies creating solution xml files and automatically checks the validity of benchmark IDs
- GeoTransformation object stores location and transformation information for lanelet networks extracted 
from the real world

###Changed
- SolutionReader can now read solution files generated by the CommonRoadSolutionReader
- CommonRoadSolutionWriter can directly write computation times and the CPU model into the solution file
- Visualization is improved and now supports legends

### Fixed
- Various small bug fixes

### Removed 
- The old commonroad.common.solution_writer.CommonRoadSolutionWriter is deprecated and replaced by 
commonroad.common.solution.CommonRoadSolutionWriter


## [2019.2] - 2019-06-27
### Changed
- Increased decimal precision of file writer
when lanelets join into or split from other lanelets
- Minimum of 3 points per lanelet border are required

### Fixed
- File writer writes goal lanes correctly
- LaneletNetwork/find_lanelet_by_id returns None instead of an error if it's not contained in network


## [2019.1] - 2019-05-21
### Added
- Initial version

